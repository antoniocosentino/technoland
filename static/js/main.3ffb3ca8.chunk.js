(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,n){e.exports=n(194)},194:function(e,t,n){"use strict";n.r(t);var a=n(59),i=n(15),r=n(16),o=n(18),c=n(17),s=n(19),A=n(2),u=n.n(A),l=n(192),h=n.n(l),m=(n(199),n(201),n(203)),f=n(213),g=new m({clientId:"fbc3d2fdb1384bb1b51505258deef3fe",clientSecret:"e008b2fe0fc64516a33a33ae0977f0e3"}),b=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("h1",null,"Is ",this.props.userName," in the land of Techno?")}}]),t}(u.a.Component),p=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,s=new Array(r),A=0;A<r;A++)s[A]=arguments[A];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).loadingImage=n(437),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("img",{className:"loadingImg",src:this.loadingImage,alt:"Loading"})}}]),t}(u.a.Component),y=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("span",{className:"yesNo"},this.props.answer)}}]),t}(u.a.Component),d=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,s=new Array(r),A=0;A<r;A++)s[A]=arguments[A];return(a=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).playingIcon=n(438),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("img",{className:"playingIcon",src:this.playingIcon,alt:"Eq"})}}]),t}(u.a.Component),E=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("img",{alt:"Album Cover",src:this.props.albumImg})}}]),t}(u.a.Component),O=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("span",{className:"tag",key:this.props.tag},this.props.tag)}}]),t}(u.a.Component),w=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"songInfo"},u.a.createElement("span",{className:"songArtist"},this.props.artist),"\xa0-\xa0",u.a.createElement("span",{className:"songTitle"},this.props.title))}}]),t}(u.a.Component),j=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("span",null,this.props.userName," is not listening to music right now.")}}]),t}(u.a.Component),I=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("a",{className:"viewGit",href:"https://github.com/antoniocosentino/technoland"},u.a.createElement("i",{className:"fa fa-github"})," View on Github")}}]),t}(u.a.Component),C=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"areYou"},!this.props.message&&u.a.createElement("span",null,"Are you in the land of techno?"),this.props.message&&u.a.createElement("span",null,"There was a problem connecting to your Spotify account.",u.a.createElement("br",null),"Do you want to try again?"),u.a.createElement("a",{href:this.props.link,className:"spotifyConnect"},"Connect with Spotify"))}}]),t}(u.a.Component),k=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"separator"})}}]),t}(u.a.Component),v=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(c.a)(t).call(this))).state={albumImg:null,loading:!0,artist:null,title:null,yesNo:"",isPlaying:!1,tags:[],connError:!1},e.accessToken="",e.fetchInfo=e.fetchInfo.bind(Object(a.a)(Object(a.a)(e))),e.connectLink="",e.userName="Antonio",e.isCustomUser=!1,e}return Object(s.a)(t,e),Object(r.a)(t,[{key:"generateConnectLink",value:function(){return new m({redirectUri:"https://antoniocosentino.github.io/technoland",clientId:"fbc3d2fdb1384bb1b51505258deef3fe"}).createAuthorizeURL(["user-read-currently-playing","user-read-private"],"get-token")}},{key:"getToken",value:function(){var e=this;return new Promise(function(t,n){f("https://www.kultmedia.com/lab/technoapi/",function(n,a,i){n?e.triggerError():t(JSON.parse(i))})})}},{key:"getUserToken",value:function(e){var t=this;return new Promise(function(n,a){f("".concat("https://www.kultmedia.com/lab/spotifyapi/","?code=").concat(e),function(e,a,i){e?t.triggerError():n(JSON.parse(i))})})}},{key:"getPlayingInfo",value:function(){var e=this;return new Promise(function(t,n){g.setAccessToken(e.accessToken),g.getMyCurrentPlayingTrack().then(function(e){t(e)},function(t){e.triggerError()})})}},{key:"getArtistInfo",value:function(e){var t=this;return new Promise(function(n,a){g.setAccessToken(t.accessToken),g.searchArtists(e).then(function(e){n(e)},function(e){t.triggerError()})})}},{key:"getMyInfo",value:function(){var e=this;return new Promise(function(t,n){g.setAccessToken(e.accessToken),g.getMe().then(function(e){t(e)},function(t){e.triggerError()})})}},{key:"triggerError",value:function(){this.setState({isPlaying:!1,yesNo:"NO",loading:!1})}},{key:"parseQueryString",value:function(){var e=window.location.search,t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,a,i){t[n]=i}),t}},{key:"fetchInfo",value:function(){var e=this;this.getPlayingInfo().then(function(t){t.body?e.getArtistInfo(t.body.item.artists[0].name).then(function(n){var a=["techno","electro house","destroy techno","german techno","tech house","minimal techno"].some(function(e){return n.body.artists.items[0].genres.indexOf(e)>=0}),i="";i=t.body.is_playing&&a?"YES":"NO",t.body.is_playing?document.title="".concat(t.body.item.artists[0].name," - ").concat(t.body.item.name):document.title="Is ".concat(e.userName," in the land of Techno?"),e.setState({albumImg:t.body.item.album.images[0].url,artist:t.body.item.artists[0].name,title:t.body.item.name,loading:!1,isPlaying:t.body.is_playing,yesNo:i,tags:n.body.artists.items[0].genres})}):e.triggerError()}),setTimeout(this.fetchInfo,1e4)}},{key:"componentDidMount",value:function(){var e=this,t=this.parseQueryString();t.rotate&&(document.body.style.transform="rotate(".concat(t.rotate,"deg)"));var n=t.code;n?(window.history.replaceState(null,null,window.location.pathname),this.getUserToken(n).then(function(t){t.access_token?(e.accessToken=t.access_token,e.getMyInfo().then(function(t){e.userName=t.body.display_name,e.isCustomUser=!0,e.fetchInfo()})):e.setState({connError:!0,loading:!1})})):this.getToken().then(function(t){e.accessToken=t.access_token,e.fetchInfo()}),this.connectLink=this.generateConnectLink()}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("div",{className:"technoContainer"},!this.state.connError&&u.a.createElement(b,{userName:this.userName}),this.state.loading&&u.a.createElement(p,null),!this.state.loading&&!this.state.connError&&u.a.createElement("div",{className:"albumWrapper"},u.a.createElement(y,{answer:this.state.yesNo}),this.state.isPlaying&&u.a.createElement("div",null,u.a.createElement(E,{albumImg:this.state.albumImg}),u.a.createElement(d,null),u.a.createElement(w,{artist:this.state.artist,title:this.state.title}),this.state.tags.map(function(e){return u.a.createElement(O,{key:e,tag:e})})),!this.state.isPlaying&&u.a.createElement(j,{userName:this.userName})),!this.isCustomUser&&u.a.createElement("div",null,!this.state.connError&&u.a.createElement(k,null),u.a.createElement(C,{message:this.state.connError,link:this.connectLink})),u.a.createElement(k,null),u.a.createElement(I,null)))}}]),t}(u.a.Component);h.a.render(u.a.createElement(v,null),document.getElementById("root"))},201:function(e,t,n){},230:function(e,t){},232:function(e,t){},241:function(e,t){},243:function(e,t){},268:function(e,t){},270:function(e,t){},271:function(e,t){},276:function(e,t){},278:function(e,t){},284:function(e,t){},286:function(e,t){},305:function(e,t){},317:function(e,t){},320:function(e,t){},346:function(e,t){},437:function(e,t,n){e.exports=n.p+"static/media/loading.8c077453.gif"},438:function(e,t){e.exports="data:image/gif;base64,R0lGODlhDAAMALMAAP///9bW1s7Ozr29vbW1ta2traWlpZycnJSUlIyMjAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQEBQD/ACwAAAAADAAMAAAEORAEQisNQJRdKDeCIXKbKB7oYQBAiiIwcrAxnCB0DiR8wvq7X+9H3A2DSB6ix+whBs3mADBYNp+ACAAh+QQEBQD/ACwAAAAADAAMAAAEOBAEQisNQJRdKDeCIXKbKB7oYaYoggDAAbt08gJ3nexw0vc7H0BIDP6GQERwGUQMmMwBYKBkOgERACH5BAQFAP8ALAAAAAAMAAwAAAQ3EARCKw1AlF0oN4IhcpsoHuhhAECKIjBysDGc1LSd7GzS70AfQEgE9o7DW3B5GzCDA8AAwUREIwAh+QQEBQD/ACwAAAAADAAMAAAEOBAEQisNQJRdKDeCIW4AUIjioR5GuapIjBylHCd2XSZ8n+y7HhDwIwqJQx7Cx8QNmr4BYLBkIqQRACH5BAQFAP8ALAAAAAAMAAwAAAQ4EARCKw1AlF0oN4IhcpsoHuhhAECKIjBysDGc1LSd7GzS9zsfQEgM/oZARHAZRAyYzAFgoGQ6AREAIfkEBAUA/wAsAAAAAAwADAAABDgQBEIrDUCUXSg3giFymyge6GGmKOIiBwC8boLI91wnvJz4vOAPMCwGfUiiTci0DZrCAWCAaCKkEQAh+QQEBQD/ACwAAAAADAAMAAAENxAEQisNQJRdKDeCIXKbKB7oYaYoggBA6s7JC9h0osMJz+s9QHAI9Al/CKASiBgslwPAILlsAiIAIfkEBAUA/wAsAAAAAAwADAAABDYQBEIrDUCUXSg3giFymygeBwCYaIsgqqu+CQy8r5rsie4DvB7wFyTqasFkbaAMDgADhBLxjAAAIfkEBAUA/wAsAAAAAAwADAAABDcQBEIrDUCUXSg3giFymyge6GGmKIIAQOrOyQvMdKLDCc/rPUBwCPQJfwigEogYLJcDwCC5bAIiACH5BAQFAP8ALAAAAAAMAAwAAAQ3EARCKw1AlF0oN4IhcpsoHuhhpiiCAEDqzskL2HaiJzAP+Dtgr7cb/oiIoLI2WAYHgEFSiYBGAAAh+QQEBQD/ACwAAAAADAAMAAAENxAEQisNQJRdKDeCIXKbKB7oYaYo4iIHALxuQstvoicyD/g7YK+3G/6IiKDSNlgGB4BBUomARgAAOw=="}},[[193,2,1]]]);
//# sourceMappingURL=main.3ffb3ca8.chunk.js.map